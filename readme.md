# log

## 25-04-18

데이터베이스 쪽 서버는 갈아 엎을 생각하는게 맞음 api 처음부터 다시 짤 가능성 높음

## 25-04-25

### baseNodeId 최초 등록 시점

textOriginRegister > idsBaseAll 에서 시작 됨
searchStore에서 관리됨

# baseNode 표시는 baseNodeHighlight

# 박스 오버레이 lzTextOverlay

## 오버레이 프레임의 메타데이터 getFrameNodeMetaData

# 일단 오버레이 될 때 메타데이터는 일시적으로 하나로 통일 됨

이는 오버레이가 전체 새로고침 되기 전까지 유지 됨
오버레이 프레임에는 임시 값이 저장되고 텍스트 노드에 영구저장 되는 개념

이 코드가 들어가면 선택 된게 없을 때 선택에 의한 변화는 초기화 됨

```js
if (backgroundFrame) {
	await overlayRender();
}
```

## overlayRender 에 비효율적인 로직이 있음

루프가 3번 돔
한 텍스트를 기반으로 화면 생성을 두번 함.. > 겹친 텍스트가 많이 보임

> 이거 진짜 물리적으로 겹쳐있는걸로 확인 됨 ( 보이는 요소인데, 백그라운드보다 뒤에 있는 경우였음, 랜더링 범위에 있어서 랜더링도 되고, 속성 상에서도 보이는 문제 )
> 선택해제 할 때 1개로 줄면 다시 전체 선택 됨 > 자동 선택 온오프 할 수 있어야 함

그리고 초기 설정 시, 설정 후 선택해제 등을 하고 다시 선택해야 정상작동하는 문제가 있음
데이터플로우가 좀 ... 구림

## 베이스 노드를 변경할 수 있음

searchStore.updateBaseNode 에서 업데이트 할 수 있음
전파도 알아서 됨
변경을 위해 UI에서 선택 토글 로직 대신에 다음 베이스 노드를 선택하는 기능을 넣었음

다중 선택은 기본적으로 베이스노드를 기반으로 선택 확장을 하겠다 라는 로직임

## 섹션 선택 시 해야할 것 2가지 + a임

1. 적용 범위 선택
2. 기준 노드 선택
3. (선택) 이름 결정
